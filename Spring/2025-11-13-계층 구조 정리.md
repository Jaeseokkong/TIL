# ğŸ—ï¸ Spring ê³„ì¸µ êµ¬ì¡° ì •ë¦¬ 

## 1ï¸âƒ£ êµ¬ì¡° ê°œìš”
```markdown
Controller â†’ Service â†’ DAO/Repository â†’ Entity
       â†•
     DTO (ì…ì¶œë ¥ìš©)
```

|ê³„ì¸µ|ì—­í• |
|Controller|í´ë¼ì´ì–¸íŠ¸ ìš”ì²­ ì²˜ë¦¬, DTO ë³€í™˜, ê²°ê³¼ ë°˜í™˜|
|Service|ë¹„ì§€ë‹ˆìŠ¤ ë¡œì§, ê²€ì¦, Entity ìƒì„±/ì—…ë°ì´íŠ¸|
|DAO / Respository|DB ì ‘ê·¼, Entity CRUD ìˆ˜í–‰|
|Entity|DB í…Œì´ë¸”ê³¼ ë§¤í•‘ë˜ëŠ” ê°ì²´, ì˜ì†ì„± ê´€ë¦¬|
|DTO|ë°ì´í„° ì „ì†¡ ê°ì²´, API ìš”ì²­/ì‘ë‹µ ìš©ë„|

---

## 2ï¸âƒ£ Entity (Reservation)

- DB í…Œì´ë¸”ê³¼ 1:1 ë§¤í•‘ë˜ëŠ” ê°ì²´
- JPA ì–´ë…¸í…Œì´ì…˜ìœ¼ë¡œ í•„ë“œ ì†ì„±, PK, ìƒì„±/ìˆ˜ì •ì¼ ìë™ ì²˜ë¦¬

```java
@Entity
@Table(name = "reservation")
public class Reservation {

    @Id
    @GeneratedValue(strategy = GenerationType.IDENTITY)
    private Long id;

    @Column(nullable = false, unique = true, length = 64)
    private String token;

    @Column(name = "customer_name", nullable = false, length = 200)
    private String customerName;

    @Enumerated(EnumType.STRING)
    private Status status;

    @Temporal(TemporalType.TIMESTAMP)
    private Date createdAt;

    @Temporal(TemporalType.TIMESTAMP)
    private Date updatedAt;

    @PrePersist
    protected void onCreate() {
        createdAt = new Date();
        updatedAt = new Date();
        status = Status.ACTIVE;
    }

    @PreUpdate
    protected void onUpdate() {
        updatedAt = new Date();
    }

    // getter / setter ...
}
```

- EntityëŠ” **DB ì¤‘ì‹¬ ì„¤ê³„**
- ìƒíƒœê°’, ë‚ ì§œëŠ” **Enum, Temporal**ë¡œ ì²˜ë¦¬
- @PrePersist / @PreUpdateë¡œ **ìƒì„±/ìˆ˜ì •ì¼ ìë™ ê´€ë¦¬**

---

## 3ï¸âƒ£ DTO

- API ìš”ì²­ê³¼ ì‘ë‹µìš© ë°ì´í„° ê°ì²´
- Entityë¥¼ ê·¸ëŒ€ë¡œ ì“°ì§€ ì•Šê³ , **í•„ìš”í•œ ì •ë³´ë§Œ ì „ë‹¬**

```java
public class ReservationDto {
    private String customerName;
    private String customerPhone;
    private String regionSido;
    private DesiredOpeningType desiredOpeningType;
    private Date scheduleAt;
    // getter / setter
}

public class ReservationResponseDto extends ReservationDto {
    private Long id;
    private Date createdAt;
    private Status status;
    private String errorMessage;
    // getter / setter
}
```

- DTOëŠ” **ì»¨íŠ¸ë¡¤ëŸ¬ ì…ì¶œë ¥ ì „ìš©**
- Validation, Error ë©”ì‹œì§€, ì‘ë‹µ êµ¬ì¡° ê´€ë¦¬ ê°€ëŠ¥
- Entityì™€ 1:1 ë§¤í•‘ í•„ìš” ì—†ìŒ

---