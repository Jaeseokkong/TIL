# ìŠ¤í”„ë§ ë¹ˆ(Spring Bean)
![Grid Template Areas ì˜ˆì‹œ](../images/spring-bean.png)

## 1ï¸âƒ£ ìŠ¤í”„ë§ ë¹ˆì´ë€?
> **ìŠ¤í”„ë§ ë¹ˆ(Spring Bean)** ì€ **ìŠ¤í”„ë§ ì»¨í…Œì´ë„ˆ**ê°€ ìƒì„±í•˜ê³  ê´€ë¦¬í•˜ëŠ” ê°ì²´ë¥¼ ë§í•©ë‹ˆë‹¤.

ë³´í†µ ìš°ë¦¬ê°€ ìë°”ì—ì„œ ê°ì²´ë¥¼ ì‚¬ìš©í•  ë• `new` í‚¤ì›Œë“œë¡œ ì§ê² ìƒì„±í•©ë‹ˆë‹¤. í•˜ì§€ë§Œ ìŠ¤í”„ë§ì—ì„œëŠ” **ê°ì²´ ìƒì„±ë¶€í„° ì˜ì¡´ì„± ì£¼ì…ê¹Œì§€** ìŠ¤í”„ë§ì´ ëŒ€ì‹  í•´ì£¼ëŠ” êµ¬ì¡°ë¥¼ ì‚¬ìš©í•©ë‹ˆë‹¤.  
ì´ë•Œ **ìŠ¤í”„ë§ì´ ê´€ë¦¬í•˜ëŠ” ê°ì²´**ë¥¼ **ë¹ˆ(Bean)** ì´ë¼ê³  ë¶€ë¦…ë‹ˆë‹¤.

ì˜ˆë¥¼ ë“¤ì–´
```java
public class HelloService {
	public String sayHello() {
		return "Hello, Spring!";
	}
}
```
ì´ í´ë˜ìŠ¤ë¥¼ ì§ì ‘ ì‚¬ìš©í•˜ëŠ” ëŒ€ì‹ , ìŠ¤í”„ë§ì— ë“±ë¡í•˜ë©´ ë‹¤ìŒì²˜ëŸ¼ ì‚¬ìš© ê°€ëŠ¥
```java
@Service
public class HelloService {
    public String sayHello() {
        return "Hello, Spring!";
    }
}

@RestController
public class HelloController {
    private final HelloService helloService;

    // ì˜ì¡´ì„± ì£¼ì… (DI)
    public HelloController(HelloService helloService) {
        this.helloService = helloService;
    }

    @GetMapping("/hello")
    public String hello() {
        return helloService.sayHello();
    }
}
```
âœ”ï¸ ìŠ¤í”„ë§ì€ `HelloService`ë¥¼ ë¹ˆìœ¼ë¡œ ë“±ë¡í•˜ê³ , `HelloController`ì— ìë™ì„ ì£¼ì…í•´ì¤ë‹ˆë‹¤.

---

## 2ï¸âƒ£ ë¹ˆì€ ì–´ë–»ê²Œ ë“±ë¡í• ê¹Œ?
ìŠ¤í”„ë§ì—ì„œ ë¹ˆì„ ë“±ë¡í•˜ëŠ” ë°©ë²•ì€ í¬ê²Œ 2ê°€ì§€ê°€ ìˆìŠµë‹ˆë‹¤.

### â‘  ìë™ ë“±ë¡ (ì»´í¬ë„ŒíŠ¸ ìŠ¤ìº” ê¸°ë°˜)
í´ë˜ìŠ¤ì— ì–´ë…¸í…Œì´ì…˜ì„ ë¶™ì´ë©´ ìŠ¤í”„ë§ì´ ìë™ìœ¼ë¡œ ë¹ˆìœ¼ë¡œ ë“±ë¡í•´ì¤ë‹ˆë‹¤.

|ì–´ë…¸í…Œì´ì…˜|ì˜ë¯¸|
|:---|:---|
|`@Component`|ê¸°ë³¸ ì»´í¬ë„ŒíŠ¸|
|`@Controller`|ì›¹ ìš”ì²­ ì²˜ë¦¬ìš©|
|`@Service`|ë¹„ì¦ˆë‹ˆìŠ¤ ë¡œì§ìš©|
|`@Repository`|DAO/DB ì ‘ê·¼ìš©|

```java
@Component
public class MyComponent {}

@Service
public class MyService {}

@Repository
public class MyRepository {}

@Controller
public class MyController {}
```
âœ”ï¸ ì´ ë°©ì‹ì€ `@ComponentScan`ì´ ì„¤ì •ëœ ìœ„ì¹˜ ì´í•˜ì˜ í´ë˜ìŠ¤ë“¤ë§Œ ìŠ¤ìº”ë©ë‹ˆë‹¤.

### â‘¡ ìˆ˜ë™ ë“±ë¡ (Java Config ë°©ì‹)
Java ì„¤ì • íŒŒì¼ì—ì„œ ì§ì ‘ ë¹ˆì„ ë“±ë¡í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

```java
@Configuration
public class AppConfig {

    @Bean
    public MyService myService() {
        return new MyService();
    }
}
```
âœ”ï¸ ì£¼ë¡œ ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ì²˜ëŸ¼ ë‚´ê°€ ì§ì ‘ ì–´ë…¸í…Œì´ì…˜ì„ ëª» ë¶™ì´ëŠ” í´ë˜ìŠ¤ì— ì‚¬ìš©í•©ë‹ˆë‹¤.

---

## 3ï¸âƒ£ ìŠ¤í”„ë§ ë¹ˆì„ ì™œ ì“°ëŠ”ê°€?
### ğŸ”¹ ê°ì²´ ê´€ë¦¬ ì±…ì„ ë¶„ë¦¬ - ë‚´ê°€ `new` í•˜ì§€ ì•Šì•„ë„ ë¨
#### ğŸ’¬ ë¬¸ì œ ìƒí™©
```java
public class UserController {
    private UserService userService = new UserService(); // ì§ì ‘ ìƒì„±
}
```
âš ï¸ í´ë˜ìŠ¤ ë‚´ë¶€ì—ì„œ ì§ì ‘ ê°ì²´ë¥¼ ë§Œë“¤ë©´, ì±…ì„ì´ ì´ê³³ì €ê³³ì— í©ì–´ ì§‘ë‹ˆë‹¤.  
âš ï¸ ëˆ„ê°€ ë§Œë“¤ê³  ëˆ„ê°€ ê´€ë¦¬í•˜ëŠ”ì§€ íŒŒì•…í•˜ê¸° ì–´ë µìŠµë‹ˆë‹¤.

#### âœ… ìŠ¤í”„ë§ ë°©ì‹
```java
@RestController
public class UserController {
    private final UserService userService;

    // ìŠ¤í”„ë§ì´ UserServiceë¥¼ ìë™ìœ¼ë¡œ ì£¼ì…!
    public UserController(UserService userService) {
        this.userService = userService;
    }
}
```
- **ê°œë°œìëŠ” ê°ì²´ ìƒì„±ì— ì‹ ê²½ ì•ˆ ì¨ë„ ë˜ê²Œë”** ìŠ¤í”„ë§ì´ ì•Œì•„ì„œ ìƒì„±í•´ì„œ ë„£ì–´ì¤ë‹ˆë‹¤.

---

### ğŸ”¹ ì˜ì¡´ì„± ì£¼ì… (DI) â€“ ë°”ê¿” ë¼ìš°ê¸° ì‰¬ìš´ êµ¬ì¡°
#### ğŸ’¬ ë¬¸ì œ ìƒí™©
```java
public class PayService {
    private final KakaoPay kakaoPay = new KakaoPay(); // ê³ ì •ë¨
}
```
âš ï¸ `TossPay`ë¡œ ë°”ê¾¸ë ¤ë©´ `PayService` ì½”ë“œë¥¼ ìˆ˜ì •í•´ì•¼ í•©ë‹ˆë‹¤.

#### âœ… ìŠ¤í”„ë§ ë°©ì‹
```java
public interface Payment {
    void pay();
}

@Component
public class KakaoPay implements Payment {
    public void pay() { System.out.println("ì¹´ì¹´ì˜¤ ê²°ì œ"); }
}

@Component
public class TossPay implements Payment {
    public void pay() { System.out.println("í† ìŠ¤ ê²°ì œ"); }
}

@Service
public class PayService {
    private final Payment payment;

    public PayService(Payment payment) {
        this.payment = payment;
    }
}
```
- ì›í•˜ëŠ” êµ¬í˜„ì²´ë§Œ ë°”ê¾¸ë©´ ë(`@Primary`, `@Qualifier`ë¡œ ì„ íƒ ê°€ëŠ¥)
- í…ŒìŠ¤íŠ¸ìš© Mock ê°ì²´ë„ ì‰½ê²Œ ì£¼ì… ê°€ëŠ¥

##### ğŸ§ @Primary, @Qualifier ì˜ˆì‹œ
```java
// @Primary ì˜ˆì‹œ
@Component
@Primary
public class KakaoPay implements Payment {
    public void pay() { System.out.println("ì¹´ì¹´ì˜¤ ê²°ì œ"); }
}
// PayServiceì—ì„œ ê¸°ë³¸ì ìœ¼ë¡œ KakaoPayê°€ ì£¼ì…
```
```java
// @Qualifier ì˜ˆì‹œ
@Service
public class PayService {
    private final Payment payment;

    public PayService(@Qualifier("tossPay") Payment payment) {
        this.payment = payment;
    }
}
```


---

### ğŸ”¹ ì‹±ê¸€í†¤ ê´€ë¦¬ - ê°ì²´ í•˜ë‚˜ë¡œ ë‹¤ ê°™ì´ ì”€
#### ğŸ’¬ ë¬¸ì œ ìƒí™©
```java
OrderService order1 = new OrderService();
OrderService order2 = new OrderService();

System.out.println(order1 == order2); // false
```
âš ï¸ ì§ì ‘ ìƒì„±í•˜ë©´ ë§¤ë²ˆ ìƒˆ ê°ì²´ â†’ ìƒíƒœ ë¶ˆì¼ì¹˜, ë©”ëª¨ë¦¬ ë‚­ë¹„ ìœ„í—˜.

#### âœ… ìŠ¤í”„ë§ ë°©ì‹
```java
@Component
public class OrderService {
    // ë‚´ë¶€ ë¡œì§
}
```
```java
@Autowired
OrderService order1;

@Autowired
OrderService order2;

System.out.println(order1 == order2); // true
```
- ìŠ¤í”„ë§ì´ **ì‹±ê¸€í†¤ìœ¼ë¡œ ê°ì²´ë¥¼ í•œ ë²ˆë§Œ ë§Œë“¤ê³  ì¬ì‚¬ìš©**í•¨ â†’ ë©”ëª¨ë¦¬ ì ˆì•½ + ìƒíƒœ ê³µìœ  ê°€ëŠ¥

