# Redux

ReduxëŠ” ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ëª¨ë“  ìƒíƒœë¥¼ í•˜ë‚˜ì˜ ì¤‘ì•™ ì €ì¥ì†Œì— ê´€ë¦¬í•˜ëŠ”  **ì˜ˆì¸¡ ê°€ëŠ¥í•œ ìƒíƒœ ê´€ë¦¬ ë¼ì´ë¸ŒëŸ¬ë¦¬**ì…ë‹ˆë‹¤.  
ìƒíƒœ(state)ì˜ ë³€í™” íë¦„ì´ í•œ ë°©í–¥(One-way flow)ë¡œ ê³ ì„±ë˜ì–´ ìˆì–´ ë™ì‘ì´ ëª…í™•í•˜ê³  ë””ë²„ê¹…ì´ ì‰½ìŠµë‹ˆë‹¤.

## 1ï¸âƒ£ êµ¬ì¡° ì´í•´

### ğŸ”¹ Store 

- ì• í”Œë¦¬ì¼€ì´ì…˜ì˜ ìƒíƒ€ê°€ ì €ì¥ë˜ëŠ” **ì¤‘ì•™ ì €ì¥ì†Œ**  
- Reduxì—ì„œëŠ” **ì•± ì „ì²´ê°€ í•˜ë‚˜ì˜ storeë§Œ ê°–ëŠ” ê²ƒì´ ì›ì¹™(ì‹±ê¸€ ìŠ¤í† ì–´)**

Store ë‚´ë¶€ì—ëŠ” ë‹¤ìŒ ë‘ ê°€ì§€ê°€ ì¡´ì¬í•©ë‹ˆë‹¤.

- **state**: ì• í”Œë¦¬ì¼€ì´ì…˜ì—ì„œ ê´€ë¼í•  ì‹¤ì œ ë°ì´í„°
- **reducer**: stateê°€ ì–´ë–»ê²Œ ë³€ê²½ë ì§€ë¥¼ ê²°ì •í•˜ëŠ” í•¨ìˆ˜

StoreëŠ” ì™¸ë¶€ì—ì„œ ë‹¤ìŒ APIë¥¼ ì œê³µí•©ë‹ˆë‹¤.

|API|ì„¤ëª…|
|:---|:---|
|`getState()`|í˜„ì¬ ìƒíƒœ(state)ë¥¼ ë°˜í™˜|
|`dispatch(action)`|reducerë¥¼ í˜¸ì¶œí•˜ì—¬ ìƒíƒœë¥¼ ë³€ê²½|
|`subscribe(listener)`|ìƒíƒœ ë³€ê²½ ì‹œ ì‹¤í–‰í•  í•¨ìˆ˜ë¥¼ ë“±ë¡(UI ì—…ë°ì´íŠ¸ ë“±)|

---

### ğŸ”¹ Action

- ìƒíƒœë¥¼ ì–´ë–»ê²Œ ë³€ê²½í• ì§€ ì„¤ëª…í•˜ëŠ” "ê°ì²´"  
- ë‹¨ìˆœí•œ **ì •ë³´**ì¼ ë¿ì´ë©°, ë³€ê²½ ë¡œì§ì€ ì—†ìŒ

```js
{ type: "INCREMENT" }
```

#### Actionì˜ ê·œì¹™
- ë°˜ë“œì‹œ `type` ì†ì„±ì´ ìˆì–´ì•¼ í•¨
- ì¶”ê°€ ë°ì´í„°ëŠ” payloadë¡œ ì „ë‹¬ ê°€ëŠ¥ 

---

### ğŸ”¹ Reducer

- Actionì„ ê¸°ë°˜ìœ¼ë¡œ **ìƒˆë¡œìš´ stateë¥¼ ë°˜í™˜í•˜ëŠ” ìˆœìˆ˜ í•¨ìˆ˜(Pure Function)**

```js
function reducer(state, action) {
  switch (action.type) {
    case "INCREMENT":
      return state + 1;
    default:
      return state;
  }
}
```

#### Reducerì˜ íŠ¹ì§•

- **ê¸°ì¡´ stateë¥¼ ì§ì ‘ ë³€ê²½í•˜ì§€ ì•ŠìŒ (ë¶ˆë³€ì„± ìœ ì§€)**
- í•­ìƒ **ìƒˆë¡œìš´ state**ë¥¼ ë¦¬í„´
- ê°™ì€ ì…ë ¥(state + action)ì´ ë“¤ì–´ì˜¤ë©´ í•­ìƒ **ê°™ì€ ê²°ê³¼ê°€ ë‚˜ì˜¤ëŠ” ìˆœìˆ˜ í•¨ìˆ˜**

---

### ğŸ”¹ Dispatch

- ìƒíƒœë¥¼ ë³€ê²½í•œëŠ **ìœ ì¼í•œ ë°©ë²•**
- dispatchëŠ” actionì„ reducerì—ê²Œ ì „ë‹¬

```js
store.dispatch({ type: "INCREMENT" });
```

---

### ğŸ”¹ Subscribe

- ìƒíƒœê°€ ë°”ë€” ë•Œ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜ë¥¼ ë“±ë¡
- ì£¼ë¡œ UI ì—…ë°ì´íŠ¸ì— ì‚¬ìš©ë¨

```js
store.subscribe(() => {
  render(store.getState());
});
```

---

## 2ï¸âƒ£ Reduxì˜ ìƒíƒœ ë³€í™” íë¦„(One-way Data Flow)

ReduxëŠ” **ë‹¨ë°©í–¥ ë°ì´í„° íë¦„(One-way Flow)** êµ¬ì¡°ë¥¼ ê°–ê³  ìˆì–´ ì˜ˆì¸¡ ê°€ëŠ¥ì„±ì„ ë†’ì…ë‹ˆë‹¤.

ìƒíƒœ ë³€ê²½ íë¦„ì€ ë‹¤ìŒê³¼ ê°™ì´ ë‹¨ìˆœí™” í•©ë‹ˆë‹¤.

```scss
UI â†’ dispatch(action)
       â†“
   reducer(state, action)
       â†“
   ìƒˆë¡œìš´ state ìƒì„±
       â†“
 store.subscribe(listener)
       â†“
   UI ë‹¤ì‹œ ë Œë”ë§
```

- ìƒíƒœê°€ ì–¸ì œ, ì™œ, ì–´ë–»ê²Œ ë°”ë€Œì—ˆëŠ”ì§€ ì¶”ì í•˜ê¸° ìš©ì´
- ë””ë²„ê¹…ì´ ë§¤ìš° ê°„ë‹¨í•´ì§

---

## 3ï¸âƒ£ Reduxì—ì„œ ë¶ˆë³€ì„±ì´ ì¤‘ìš”í•œ ì´ìœ 

Reducerì—ì„œëŠ” ë°˜ë“œì‹œ **ê¸°ì¡´ stateë¥¼ ì§ì ‘ ë³€ê²½í•˜ë©´ ì•ˆ ë©ë‹ˆë‹¤.**

### ğŸ§ ì˜ˆì‹œ

```js
state.count = state.count + 1; // âŒ ì§ì ‘ ìˆ˜ì • (mutate)
```

```js
return { ...state, count: state.count + 1 }; // âœ… ìƒˆë¡œìš´ ê°ì²´ ìƒì„±
```

ë¶ˆë³€ì„±ì„ ì§€í‚¤ëŠ” ì´ìœ 
- ë³€ê²½ ê°ì§€ë¥¼ ë‹¨ìˆœí™”í•  ìˆ˜ ìˆìŒ
- Redux DevToolsdã…”ì„œ time-travel debuggingì´ ê°€ëŠ¥
- ìƒíƒœ ì¶”ì ì´ ì‰¬ì›€

---

## 4ï¸âƒ£ ì‹¤ì œ ì˜ˆì œë¡œ ë³´ëŠ” Redux ì•± êµ¬ì„± íŒ¨í„´

JavaScriptì—ì„œ Reduxë¥¼ ì‚¬ìš©í•  ë•ŒëŠ” ìƒíƒœê°€ ë°”ë€” ë•Œë§ˆë‹¤ UIë¥¼ ë‹¤ì‹œ ê·¸ë¦¬ë„ë¡ ì§ì ‘ `subscribe`ë¥¼ ì—°ê²°í•©ë‹ˆë‹¤.
(Reactì—ì„œëŠ” ì´ ì—­í• ì„ ì»´í¬ë„ŒíŠ¸ê°€ ìë™ìœ¼ë¡œ ìˆ˜í–‰í•˜ë¯€ë¡œ ì§ì ‘ DOMì„ ê°±ì‹ í•  í•„ìš”ê°€ ì—†ìŠµë‹ˆë‹¤.)

### ğŸ”¹ ìƒíƒœ ê¸°ë°˜ ë Œë”ë§

UIëŠ” í•­ìƒ **store.getState()ì˜ ê°’**ìœ¼ë¡œ ë¶€í„° ë§Œë“¤ì–´ì§‘ë‹ˆë‹¤.

#### ğŸ§ ì˜ˆì‹œ

```js
function render() {
  const state = store.getState();

  if (state.mode === "welcome") {
    showWelcomePage();
  } else if (state.mode === "read") {
    showArticle(state.selectedId);
  } else if (state.mode === "create") {
    showCreateForm();
  }
}
```

---

### ğŸ”¹ UI ì´ë²¤íŠ¸ â†’ Action dispatch

ë²„íŠ¼ í´ë¦­ ê°™ì€ ì´ë²¤íŠ¸ëŠ” ìƒíƒœë¥¼ ì§ì ‘ ë°”ê¾¸ì§€ ì•Šê³  í•­ìƒ **actionì„ dispatch**í•©ë‹ˆë‹¤.

```js
button.onclick = () => {
  store.dispatch({ type: "CHANGE_MODE", mode: "create" });
};
```

---

### ğŸ”¹ Subscribeë¡œ UI ìë™ ì—…ë°ì´íŠ¸

ReduxëŠ” ìƒíƒœ ë³€ê²½ ì‹œ ë“±ë¡ëœ í•¨ìˆ˜ë“¤ì„ ìë™ í˜¸ì¶œí•©ë‹ˆë‹¤.

```js
store.subscribe(render);
```

**dispatch â†’ ìƒˆë¡œìš´ state â†’ subscribe â†’ UI ì—…ë°ì´íŠ¸**  
ì´ ìë™ìœ¼ë¡œ ìˆ˜í–‰ë¨.

---

## 5ï¸âƒ£ Reducer ë‚´ë¶€ ë¡œì§ íŒ¨í„´

ReducerëŠ” í•­ìƒ ë‹¤ìŒ íŒ¨í„´ì„ ìœ ì§€í•©ë‹ˆë‹¤.

1. stateê°€ undefinedì¼ ë•Œ â†’ ì´ˆê¸° ìƒíƒœ ë°˜í™˜
2. ã…ction.typeì— ë”°ë¼ ë¶„ê¸°
3. ê¸°ì¡´ stateë¥¼ ë³€ê²½í•˜ì§€ ì•Šê³  ìƒˆë¡œìš´ stateìƒì„±
4. ìƒˆë¡œìš´ ê°ì²´ë¥¼ return

### ğŸ§ ì˜ˆì‹œ

```js
function reducer(state, action) {
  if (state === undefined) {
    return {
      mode: "welcome",
      selectedId: null,
      contents: []
    };
  }

  switch (action.type) {
    case "SELECT":
      return {
        ...state,
        selectedId: action.id,
        mode: "read",
      };

    case "CREATE":
      return {
        ...state,
        contents: [...state.contents, action.payload],
      };

    // ...
  }
}
```

---