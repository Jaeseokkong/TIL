# ğŸ—¿ Immutability

## 1ï¸âƒ£ ë¶ˆë³€ì„±ì´ë€?

**ë¶ˆë³€ì„±(Immutability)** ì€ "ê°’ì„ ë³€ê²½í•˜ì§€ ì•ŠëŠ”ë‹¤"ëŠ” ê°œë…ì´ ì•„ë‹™ë‹ˆë‹¤.  
ì •í™•íˆëŠ” **ê¸°ì¡´ ê°’ìœ¼ ìˆ˜ì •í•˜ëŠ” ëŒ€ì‹ , ë³€ê²½ëœ ê°’ì€ ë‹´ëŠ” ìƒˆë¡œìš´ ë°ì´í„°ë¥¼ ë§Œë“ ë‹¤**ë¼ëŠ” ì˜ë¯¸ì…ë‹ˆë‹¤.

- âŒ â€œë°ì´í„°ë¥¼ ë°”ê¾¼ë‹¤â€
- âœ… â€œë°”ë€ ë‚´ìš©ì„ ê°€ì§„ ìƒˆ ë°ì´í„°ë¥¼ ë§Œë“ ë‹¤â€

ì´ ë°©ì‹ì€ ì½”ë“œì˜ ì˜ˆì¸¡ ê°€ëŠ¥ì„±ì„ ë†’ì´ê³ , ë²„ê·¸ë¥¼ ì¤„ì´ë©°, ìƒíƒœ ë³€í™”ì˜ ì¶”ì ì„ ìš©ì´í•˜ê²Œ í•©ë‹ˆë‹¤.

---

## 2ï¸âƒ£ ë³€ìˆ˜ ì´ë¦„ì˜ ë¶ˆë³€ì„± : const vs var

- **ë³€ìˆ˜ëª…(identifier)ì€ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê°€ë¦¬í‚¤ëŠ 'ë¼ë²¨'**
- constëŠ” "ê°’ì´ ë¶ˆë³€"ì´ ì•„ë‹ˆë¼ **ë¼ë²¨ì´ ê°€ë¦¬í‚¤ëŠ” ì£¼ì†Œê°€ ë¶ˆë³€**ì´ë¼ëŠ” ì˜ë¯¸

### ğŸ§ ì˜ˆì‹œ
```js
var x = 10;
x = 20; // O, ì¬í• ë‹¹ ê°€ëŠ¥

const y = 10;
y = 20; // âŒ TypeError: Assignment to constant variable.
```

### ğŸ§­ ë©”ëª¨ë¦¬ ë„ì‹

```css
# var
x â”€> â”Œâ”€â”€â”€â”€â”
     â”‚ 10 â”‚
     â””â”€â”€â”€â”€â”˜
x ì¬í• ë‹¹
x â”€> â”Œâ”€â”€â”€â”€â”
     â”‚ 20 â”‚
     â””â”€â”€â”€â”€â”˜

# const
y â”€> â”Œâ”€â”€â”€â”€â”
     â”‚ 10 â”‚
     â””â”€â”€â”€â”€â”˜
y = 20 (ë¶ˆê°€ëŠ¥)
```

---

## 2ï¸âƒ£ ë³€ìˆ˜ í• ë‹¹ ë°©ì‹: Primitive vs Reference

JavaSriptì˜ ê°’ì€ ë‘ ê°€ì§€ ë°©ì‹ìœ¼ë¡œ ì €ì¥ë©ë‹ˆë‹¤.

| êµ¬ë¶„        | ì €ì¥ ë°©ì‹     | ì˜ˆì‹œ                      |
| --------- | --------- | ----------------------- |
| Primitive | ê°’ ìì²´ ì €ì¥   | number, string, boolean... |
| Reference | ë©”ëª¨ë¦¬ ì£¼ì†Œ ì €ì¥ | object, array, function |

### ğŸ§ Primitive ì˜ˆì‹œ

```js
let a = 10;
let b = a;
a = 20;
```

### ğŸ§­ ë©”ëª¨ë¦¬ ë„ì‹

```css
a â”€â”
   â–¼
â”Œâ”€â”€â”€â”€â”
â”‚ 10 â”‚
â””â”€â”€â”€â”€â”˜
   â–²
b â”€â”˜

a = 20 ì´í›„
a â”€> â”Œâ”€â”€â”€â”€â”
     â”‚ 20 â”‚
     â””â”€â”€â”€â”€â”˜
b â”€> â”Œâ”€â”€â”€â”€â”
     â”‚ 10 â”‚
     â””â”€â”€â”€â”€â”˜
```

---

## 3ï¸âƒ£ ì´ˆê¸°ê°’ ë¹„êµ: === ì˜ ë™ì‘ ì›ë¦¬

### ğŸ”¹ Primitive ë¹„êµëŠ” â€œê°’ ë¹„êµâ€

```js
10 === 10; // true
"abc" === "abc" // true
```

### ğŸ”¹ Reference ë¹„êµëŠ” â€œì£¼ì†Œ ë¹„êµâ€

```js
{} === {} // false (ë‹¤ë¥¸ ì£¼ì†Œ)
[] === [] // false

// obj1 â”€> [0x01]
// obj2 â”€> [0x02]
// obj1 !== obj2
```

---

## 4ï¸âƒ£ ê°ì²´ì˜ ê°€ë³€ì„± (Mutability)

ê°ì²´ëŠ” ì£¼ì†Œë¥¼ ê³µìœ í•˜ê¸° ë•Œë¬¸ì— ë³€ê²½í•˜ë©´ ëª¨ë“  ì°¸ì¡°ì—ì„œ ê°’ì´ ë°”ë€ë‹ˆë‹¤.

### ğŸ§ ì˜ˆì‹œ

```js
const a = { value: 10 };
const b = a;

b.value = 20;

console.log(a.value); // 20
```

### ğŸ§­ ë©”ëª¨ë¦¬ ë„ì‹

```css
a â”
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ { value:10 } â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â–²     
b â”˜

# b.valueì— 20 í• ë‹¹ ì´í›„
a â”
  â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ { value:20 } â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
  â–²     
b â”˜
```

---

## 5ï¸âƒ£ ê°ì²´ì˜ ë³µì‚¬ (Shallow Copy)

ìµœìƒìœ„ ê°’ë§Œ ìƒˆ ê°ì²´ì— ë³µì‚¬í•˜ê³  ë‚´ë¶€ ì¤‘ì²© ê°ì²´ëŠ” **ê°™ì€ ì£¼ì†Œë¥¼ ê³µìœ **í•©ë‹ˆë‹¤.

### ğŸ§ ì˜ˆì‹œ

```js
const user = {
  name: "Lee",
  pet: { type: "cat" }
};

const copy = { ...user };
copy.pet.type = "dog";

console.log(user.pet.type); // "dog"
```

### ğŸ§­ ë©”ëª¨ë¦¬ ë„ì‹

```css
user â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                â–¼
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ name: "Lee"          â”‚
        â”‚ pet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â”‚
                             â”‚ ë™ì¼í•œ pet ì£¼ì†Œ
                             â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ { type: "cat" -> "dog" } â”‚
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                             â–²
                             â”‚ ë™ì¼í•œ pet ì£¼ì†Œ
        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
        â”‚ name: "Lee"          â”‚
        â”‚ pet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜   â”‚
        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                â–²
copy â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

- ì–•ì€ ë³µì‚¬ëŠ” **ê²‰ ê°ì²´ë§Œ ìƒˆë¡œ ë§Œë“¤ê³ **, ë‚´ë¶€ì— í¬í•¨ëœ ê°ì²´(`pet`)ëŠ” **ê°™ì€ ë©”ëª¨ë¦¬ ì£¼ì†Œë¥¼ ê³µìœ **
- ë”°ë¼ì„œ, `copy.pet`ì„ ìˆ˜ì •í•˜ë©´, `user.pet`ë„ ê°™ì€ ê°ì²´ë¥¼ ê°€ë¦¬í‚¤ê³  ìˆê¸° ë•Œë¬¸ì— í•¨ê»˜ ë³€ê²½

---

## 6ï¸âƒ£ ì¤‘ì²© ê°ì²´ ë³µì‚¬ (Deep Copy)

### ğŸ§ ì˜ˆì œ

```js
const user = {
  name: "Lee",
  pet: { type: "cat" }
};

const deep = structuredClone(user);
deep.pet.type = "dog";

console.log(user.pet.type); // "cat"
```

### ğŸ§­ ë©”ëª¨ë¦¬ ë„ì‹
```css
# ì›ë³¸ user ê°ì²´
user â”€â”€â”€â”€â”€â”€â”€â”€â”
             â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ name: "Lee"           â”‚
       â”‚ pet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ { type: "cat" } â”‚  â† ë©”ëª¨ë¦¬ ì£¼ì†Œ 0x01
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜


# ê¹Šì€ ë³µì‚¬ë³¸ deep
deep â”€â”€â”€â”€â”€â”€â”€â”€â”
             â–¼
       â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
       â”‚ name: "Lee"           â”‚
       â”‚ pet â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”‚
       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                            â–¼
                    â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                    â”‚ { type: "dog" } â”‚  â† ë©”ëª¨ë¦¬ ì£¼ì†Œ 0x02
                    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## 7ï¸âƒ£ ë¶ˆë³€ í•¨ìˆ˜ ë§Œë“¤ê¸° (Pure Functions)

ì…ë ¥ê°’ì„ ë³€ê²½í•˜ì§€ ì•Šê³ , ìƒˆë¡œìš´ ê°’ì„ ë§Œë“¤ì–´ ë°˜í™˜í•˜ëŠ” í•¨ìˆ˜ì…ë‹ˆë‹¤.

### ğŸ§ ì˜ˆì‹œ (âŒ ê°€ë³€)

```js
function addAge(user) {
  user.age++;
  return user;
}
```

### ğŸ§ ì˜ˆì‹œ (âŒ ê°€ë³€)

```js
function addAge(user) {
  return { ...user, age: user.age + 1 };
}
```

---

## 8ï¸âƒ£ ê°€ë³€ vs ë¶ˆë³€ API ë¹„êµ

| ê°€ë³€(Mutable) | ë¶ˆë³€(Immutable)  |
| ----------- | -------------- |
| push        | concat         |
| pop         | slice          |
| shift       | slice          |
| splice      | filter, map    |
| sort        | slice().sort() |

### ğŸ§ ì˜ˆì‹œ

```js
const arr = [1,2,3];
const newArr = [...arr, 4]; // push ëŒ€ì‹ 
```