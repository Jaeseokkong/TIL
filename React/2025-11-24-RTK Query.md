# Redux Toolkit Query (RTK Query)

RTK Query는 “서버에서 데이터 가져오고(조회·수정) **자동으로 캐시하고 동기화**해주는 도구”입니다.  
즉, `fetch/axios` + `createAsyncThunk` + 여러 `slice`로 하던 귀찮은 반복을 훅과 선언만으로 해결해줍니다.

--

## 1️⃣ 장점 (단순함)

- API를 하나의 모듈(apiSlice)에 선언
- 선언한 엔드포인트마다 **자동으로 React** 훅이 생성 (`useGetTodosQuery`)
- 훅을 쓰면 **데이터, 로딩, 에러 상태**가 자동으로 제공
- 같은 쿼리를 여러 컴포넌트에서 쓰면 **캐시를 공유**해서 중복 요청을 막음
- 데이터 변경(POST/PUT/DELETE)은 **태그(tag)**를 통해 관련 쿼리를 자동을 새로고침(무효화)

--

## 2️⃣ 기본 개념 요약

- **API slice**: `createApi`로 만든 모듈. 엔드포인트들을 모아둠
- **query**:GET 계열, 캐시 가능한 조회
- **mutation**: POST/PUT/DELETE 같은 변경 요청, 캐시 무효화 트리거를 통해 관련 쿼리 갱신
- **tags**: 리소스 라벨 - 어떤 mutation이 어떤 query를 invalildates/provides 하는지 연결
- **fetchBaseQuery**: 내부적으로 `fetch`를 래핑한 기본 baseQuery. 간단한 API엔 이걸 사용
- **munual refetch / laze query**: 필요 시 실행하는 쿼리 (자동 실행이 아니라 훅 호출 제어)
- **optimistic updates**: 서버 응답을 기다리지 않고 클라이언트 상태를 먼저 업데이트

---