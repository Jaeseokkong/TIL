# ğŸ§¾ Google Tag Manager (GTM)

Google Tag Manager(GTM)ëŠ”<br/>
ë§ˆì¼€íŒ…Â·ë¶„ì„ìš© ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì½”ë“œ ìˆ˜ì • ì—†ì´ ê´€ë¦¬í•˜ê¸° ìœ„í•œ íƒœê·¸ ê´€ë¦¬ ë„êµ¬ì…ë‹ˆë‹¤.

íŠ¹íˆ **SPA(React / Next.js)** í™˜ê²½ì—ì„œëŠ”
ì „í†µì ì¸ â€œí˜ì´ì§€ ë¡œë“œ ê¸°ë°˜ ë¶„ì„â€ì´ ê¹¨ì§€ê¸° ë•Œë¬¸ì—
ğŸ‘‰ **GTM + dataLayer** ê¸°ë°˜ ì´ë²¤íŠ¸ ì¶”ì ì´ ê±°ì˜ í•„ìˆ˜ì— ê°€ê¹ìŠµë‹ˆë‹¤.

---

## 1ï¸âƒ£ GTMì€ ì™œ í•„ìš”í•œê°€?

> âŒ ë§¤ë²ˆ ì½”ë“œì— GA, ì „í™˜ ìŠ¤í¬ë¦½íŠ¸, í”½ì…€ì„ ì§ì ‘ ì‹¬ê¸°ì—” ë„ˆë¬´ ë²ˆê±°ë¡œì›€<br/>
âœ… GTM í•˜ë‚˜ë¡œ ëª¨ë“  íƒœê·¸ë¥¼ ì¤‘ì•™ì—ì„œ ê´€ë¦¬í•„ìš”<br/>


### ğŸ”¹ GTMì´ í•´ê²°í•˜ëŠ” ë¬¸ì œ

- GA / ê´‘ê³  ì „í™˜ íƒœê·¸ë¥¼ **ì½”ë“œ ìˆ˜ì • ì—†ì´ ì¶”ê°€Â·ìˆ˜ì •**
- ë§ˆì¼€í„°/ê¸°íšìê°€ **ê°œë°œ ë°°í¬ ì—†ì´** íƒœê·¸ ì œì–´
- ì´ë²¤íŠ¸ ì¡°ê±´ì„ **UIì—ì„œ íŠ¸ë¦¬ê±°ë¡œ ì„ ì–¸**
- ì—¬ëŸ¬ ì„œë“œíŒŒí‹° ìŠ¤í¬ë¦½íŠ¸ë¥¼ **í•œ ê³³ì—ì„œ ê´€ë¦¬**

ğŸ‘‰ ê°œë°œìëŠ” **ì´ë²¤íŠ¸ë§Œ ë˜ì§€ê³ ,**
ğŸ‘‰ GTMì€ **ì–´ë””ë¡œ ë³´ë‚¼ì§€(GA, Ads, Meta)** ê²°ì •

---

## 2ï¸âƒ£ GTMì˜ í•µì‹¬ êµ¬ì¡°

GTMì€ í¬ê²Œ ì´ êµ¬ì¡°ë¡œ ë™ì‘í•©ë‹ˆë‹¤.

```scss
[ì›¹ì•±(React)]
   â†“ dataLayer.push()
[dataLayer]
   â†“
[GTM Container]
   â†“
[Trigger â†’ Tag â†’ GA / Ads / Pixel]
```

### ğŸ”¹ í•µì‹¬ í¬ì¸íŠ¸

- ê°œë°œìëŠ” **dataLayerì— ì´ë²¤íŠ¸ë¥¼ push**
- GTMì€ ê·¸ ì´ë²¤íŠ¸ë¥¼ ê°ì§€
- ì¡°ê±´(Trigger)ì— ë§ìœ¼ë©´ Tag ì‹¤í–‰

---

## 3ï¸âƒ£ dataLayerë€?

> **GTMê³¼ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‚¬ì´ì˜ ì´ë²¤íŠ¸ í†µì‹  í†µë¡œ**

```js
window.dataLayer.push({
  event: "purchase",
  value: 30000,
  currency: "KRW",
});
```

- `dataLayer`ëŠ” **ì „ì—­ ë°°ì—´**
- `push`ë˜ëŠ” ê°ì²´ í•˜ë‚˜í•˜ë‚˜ê°€ **ì´ë²¤íŠ¸**
- `event` ê°’ì´ **íŠ¸ë¦¬ê±°ì˜ ê¸°ì¤€**

ğŸ“Œ GTMì€ **React ìƒíƒœë¥¼ ëª¨ë¦„** <br/>
â†’ ì˜¤ì§ `dataLayer`ë¡œ ì „ë‹¬ëœ ì •ë³´ë§Œ ì¸ì‹

---

## 4ï¸âƒ£ SPA(React)ì—ì„œ GTMì´ ì¤‘ìš”í•œ ì´ìœ 

### âŒ ì „í†µì ì¸ ì›¹ ë¶„ì„ ë°©ì‹

- í˜ì´ì§€ ë¡œë“œ = ì´ë²¤íŠ¸
- URL ë³€ê²½ = ìƒˆë¡œìš´ í˜ì´ì§€

### âŒ SPAì—ì„œëŠ”?

- í˜ì´ì§€ ì „í™˜ â†’ ë¦¬ë Œë”ë§
- RLë§Œ ë°”ë€Œê±°ë‚˜ ì‹¬ì§€ì–´ ì•ˆ ë°”ë€œ
- GA ê¸°ì¤€ìœ¼ë¡œëŠ” í˜ì´ì§€ ì´ë™ì´ ê°ì§€ë˜ì§€ ì•ŠìŒ

### âœ… í•´ê²° ë°©ë²•

- ì˜ë¯¸ ìˆëŠ” ì‹œì ë§ˆë‹¤ ì§ì ‘ ì´ë²¤íŠ¸ë¥¼ push
- í˜ì´ì§€ ì§„ì…
- ë²„íŠ¼ í´ë¦­
- ëª¨ë‹¬ ì˜¤í”ˆ
- ê²°ì œ ì™„ë£Œ

ğŸ‘‰ â€œìƒíƒœ ë³€í™” = ì´ë²¤íŠ¸â€ ë¡œ ì‚¬ê³  ì „í™˜ í•„ìš”

---

## 5ï¸âƒ£ GTMì—ì„œ ì“°ëŠ” 3ê°€ì§€ ê°œë…

### ğŸ”¹ Tag

> ì‹¤ì œë¡œ ì‹¤í–‰ë˜ëŠ” ìŠ¤í¬ë¦½íŠ¸

- GA4 ì´ë²¤íŠ¸
- Google Ads ì „í™˜
- Meta Pixel
- Custom HTM

---

### ğŸ”¹ Trigger

> ì–¸ì œ Tagë¥¼ ì‹¤í–‰í• ì§€

- íŠ¹ì • ì´ë²¤íŠ¸ ì´ë¦„
- íŠ¹ì • í˜ì´ì§€
- íŠ¹ì • ë³€ìˆ˜ ì¡°ê±´

ì˜ˆ:
- `event === "purchase"` ì¼ ë•Œ
- `page_type === "reservation"`

---

### ğŸ”¹ Variable

> dataLayerì—ì„œ êº¼ë‚´ ì“°ëŠ” ê°’

```js
{
  event: "purchase",
  price: 30000
}
```

- `price` â†’ GTM Variableë¡œ ë§¤í•‘
- GA ì´ë²¤íŠ¸ íŒŒë¼ë¯¸í„°ë¡œ ì „ë‹¬ ê°€ëŠ¥

---