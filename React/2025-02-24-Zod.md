# Zod
**Zod**ëŠ” TypeScript ì¹œí™”ì ì¸ **ìŠ¤í‚¤ë§ˆ ê¸°ë°˜ ë°ì´í„° ê²€ì¦ ë¼ì´ë¸ŒëŸ¬ë¦¬**ì…ë‹ˆë‹¤. Reactì—ì„œëŠ” ì£¼ë¡œ **React Hook Form**ê³¼ í•¨ê»˜ í¼ ë°ì´í„°ë¥¼ ê²€ì¦í•  ë•Œ ë§ì´ ì‚¬ìš©ë©ë‹ˆë‹¤.

>  ğŸ’¡ ì£¼ìš” íŠ¹ì§•
>- **íƒ€ì… ì•ˆì „ì„±**: TypeScriptì™€ ê°•ë ¥í•˜ê²Œ í†µí•©ë˜ì–´ íƒ€ì…ì„ ë³´ì¥í•©ë‹ˆë‹¤.
>- **ì§ê´€ì ì¸ API**: ì„ ì–¸ì ì¸ ë°©ì‹ìœ¼ë¡œ ê²€ì¦ ìŠ¤í‚¤ë§ˆë¥¼ ì‰½ê²Œ ì •ì˜í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
>- **ìœ ì—°í•œ ê²€ì¦ ê·œì¹™**: ë‹¤ì–‘í•œ ê²€ì¦ ê·œì¹™ ë° ì»¤ìŠ¤í…€ ë©”ì‹œì§€ë¥¼ ì§€ì›í•©ë‹ˆë‹¤.
>- **ì‚¬ìš©ì´ ê°„í¸**: ë¹ ë¥´ê²Œ ì ìš©í•˜ì—¬ ë°ì´í„° ê²€ì¦ì„ ê°„ê²°í•˜ê²Œ ì²˜ë¦¬í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

## 1ï¸âƒ£ ì„¤ì¹˜ ë° ê¸°ë³¸ ì‚¬ìš©ë²•
### ğŸ”¹ ì„¤ì¹˜í•˜ê¸°
```bash
yarn add zod
# ë˜ëŠ”
npm install zod
```

### ğŸ”¹ ê¸°ë³¸ì ì¸ ìŠ¤í‚¤ë§ˆ ì •ì˜ ë° ê²€ì¦
```tsx
import { z } from "zod";

const userSchema = z.object({
  firstName: z.string().min(1, 'First name is required'),
  lastName: z.string().min(1, 'Last name is required')
});

try {
  userSchema.parse({ firstName: 'John', lastName: '' });
} catch (e) {
  console.log(error);
}   
```
âœ”ï¸ `parse`ë¥¼ ì‚¬ìš©í•˜ë©´ ê²€ì¦ì´ ì‹¤íŒ¨í•  ê²½ìš° ì˜¤ë¥˜ë¥¼ ë°œìƒí•©ë‹ˆë‹¤.  
âœ”ï¸ `safeParse`ë¥¼ ì‚¬ìš©í•˜ë©´ ì˜¤ë¥˜ ëŒ€ì‹  ê²°ê³¼ë¥¼ ê°ì²´ë¡œ ë°˜í™˜í•©ë‹ˆë‹¤.

<br>

- - -

<br>

## 2ï¸âƒ£ React Hook Formê³¼ Zod í†µí•©í•˜ê¸°
ZodëŠ” **React Hook Form**ê³¼ í•¨ê»˜ ì‚¬ìš©í•˜ë©´ ë”ìš± ê°•ë ¥í•œ í¼ ê²€ì¦ì„ ìˆ˜í–‰í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### ğŸ”¹React Hook Formê³¼ Zod ì„¤ì •
```bash
yarn add @hookform/resolvers
# ë˜ëŠ”
npm install @hookform/resolvers
```

### ğŸ”¹ React Hook Formì—ì„œ Zod ì ìš©í•˜ê¸°
```tsx
"use client"

import { zodResolver } from "@hookform/resolvers/zod";
import { useForm } from "react-hook-form";
import { z } from "zod";

const signInSchema = z.object({
  email: z.string().email({ message: "Invalid email" }).min(1, { message: "Email required" }),
  password: z.string().min(8, "Password must be at least 8 characters")
});

const SignInForm = () => {
  const { register, handleSubmit, formState } = useForm({
  mode: "onChange",
    resolver: zodResolver(signInSchema),
  });

  const onSubmit = async (data) => {
    console.log(data);
  }
  
  return (
    <form onSubmit={handleSubmit(onSubmit)}>
      <input {...register("email")} placeholder="Email" />
      {formState.errors.email && <p>{formState.errors.email.message}</p>}

      <input type="password" {..register("password")} placeholder="Password" />
      {formState.errors.password && <p>{formState.errors.password.message}</p>}

      <button type="submit" disabled={!formState.isValid}>
        Sign In
      </button>
    </form>
  )
}
```
âœ”ï¸ `zodResolver`ë¥¼ ì‚¬ìš©í•´ Zodì™€ React Hook Formì„ ì—°ê²°í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
âœ”ï¸ `formState.errors`ë¥¼ í†µí•´ ê²€ì¦ ì˜¤ë¥˜ ë©”ì‹œì§€ë¥¼ í‘œì‹œí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
âœ”ï¸ `mode: "onChange"`ë¥¼ ì„¤ì •í•˜ë©´ ì…ë ¥ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ ê²€ì¦ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.

## 3ï¸âƒ£ ê³ ê¸‰ ì‚¬ìš©ë²•
### ğŸ”¹ ë¹„ë™ê¸° ê²€ì¦ (ì˜ˆ: ì´ë©”ì¼ ì¤‘ë³µ ì²´í¬)
```tsx
const asyncSchema = z.object({
  email: z.string().email("Invalid email")
})

const SignInForm = () => {
  const { register, handleSubmit, formState } = useForm({
    resolver: zodResolver(asyncSchema),
    mode: "onBlur",
    asyncResolver: async (value) => {
      const res = await fetch("/api/validate-email", {
        method: "POST",
        body: JSON.stringify({ email: values.email })
      });
      const data = await res.json();
      return data.isValid ? { values } : { values: {}, errors: { email: { message: "Email already taken" } } }
    }
  })

  return (
    <form onSubmit={handleSubmit((data) => console.log(data))}>
      <input {...register("email")} placehandler="Email" />
      {formState.errors.email && <p>{formState.errors.email.message}</p>}

      <button type="submit">Sign In</button>
    </form>
  )
}
```
âœ”ï¸ `asyncResolver`ë¥¼ ì‚¬ìš©í•˜ë©´ ì„œë²„ì™€ ì—°ë™í•˜ì—¬ ê²€ì¦í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.  
âœ”ï¸ `mode: "onBlur"`ë¥¼ ì„¤ì •í•˜ë©´ ì…ë ¥ í•„ë“œì—ì„œ í¬ì»¤ìŠ¤ë¥¼ ë²—ì–´ë‚  ë•Œ ê²€ì¦ì´ ì‹¤í–‰ë©ë‹ˆë‹¤.